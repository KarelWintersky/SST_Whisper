# üéß Audio Transcriber

**Audio Transcriber** ‚Äî —ç—Ç–æ Python-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –∞—É–¥–∏–æ—Ñ–∞–π–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ [OpenAI Whisper](https://github.com/openai/whisper). –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞–∫–µ—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ–∞–π–ª–æ–≤, —ç–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç—ã SRT –∏ TXT, –∞ —Ç–∞–∫–∂–µ –≥–∏–±–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª.

---

## üì¶ –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è:

- üîä –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –∞—É–¥–∏–æ–∑–∞–ø–∏—Å–µ–π (–≤ —Ç–æ–º —á–∏—Å–ª–µ —Ä–µ—á–∏) –≤ —Ç–µ–∫—Å—Ç.
- üìÇ –û–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–∞–ø–∫–µ (–≤–∫–ª—é—á–∞—è –ø–æ–¥–∫–∞—Ç–∞–ª–æ–≥–∏).
- üìù –≠–∫—Å–ø–æ—Ä—Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç—ã:
  - `.txt` ‚Äî —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ (`_timecodes.txt`)
  - `.txt` ‚Äî —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç (`_raw.txt`)
  - `.srt` ‚Äî —Å—É–±—Ç–∏—Ç—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚öôÔ∏è –ì–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ `settings.ini`.
- üß† –ü–æ–¥–¥–µ—Ä–∂–∫–∏ GPU (—á–µ—Ä–µ–∑ CUDA) –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.
- üìä –í—ã–≤–æ–¥–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏.

---

## üß∞ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–∫—Ä–∏–ø—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

```bash
pip install torch torchaudio
pip install openai-whisper
pip install pydub
pip install numpy
```

> ‚ö†Ô∏è –î–ª—è —Ä–∞–±–æ—Ç—ã —Å CUDA —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è –≤–µ—Ä—Å–∏—è `torch` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CUDA.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
audio_transcriber/
‚îú‚îÄ‚îÄ audio_transcriber.py     # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ settings.ini             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ models/                  # –ü–∞–ø–∫–∞ –¥–ª—è –º–æ–¥–µ–ª–µ–π Whisper (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ sources/                 # –ü–∞–ø–∫–∞ —Å –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞–º–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (settings.ini)

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:

```ini
[OPTIONS]
sources_dir = sources/
transcribe_engine = openai-whisper
whisper_model = base
force_transcribe_language = ru
model_path = ./models/
skip_transcoded_files = true
use_cuda = true
export_srt_file = true
export_raw_file = true
logging = true

[TRANSCRIBE]
beam_size = 5
temperature = 0.0,0.2,0.4,0.6,0.8,1.0
condition_on_prev_tokens = true
initial_prompt = 
compression_ratio_threshold = 2.4
logprob_threshold = -1.0
no_speech_threshold = 0.6
patience = 1.0
length_penalty = 1.0
suppress_blank = true
suppress_tokens = -1
without_timestamps = false
max_initial_timestamp = 1.0
fp16 = true
temperature_increment_on_fallback = 0.2
```

### üîß –ü–∞—Ä–∞–º–µ—Ç—Ä—ã [OPTIONS]:

| –ü–∞—Ä–∞–º–µ—Ç—Ä                     | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------------------------|----------|
| `sources_dir`               | –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –∞—É–¥–∏–æ—Ñ–∞–π–ª–∞–º–∏ |
| `transcribe_engine`         | –î–≤–∏–∂–æ–∫ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ (`openai-whisper`) |
| `whisper_model`             | –ú–æ–¥–µ–ª—å Whisper: `tiny`, `base`, `small`, `medium`, `large` |
| `force_transcribe_language` | –Ø–∑—ã–∫ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ru`, `en`). –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è |
| `model_path`                | –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å –º–æ–¥–µ–ª—è–º–∏ |
| `skip_transcoded_files`     | –ü—Ä–æ–ø—É—Å–∫–∞—Ç—å —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã |
| `use_cuda`                  | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GPU (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω) |
| `export_srt_file`           | –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å SRT-—Å—É–±—Ç–∏—Ç—Ä—ã |
| `export_raw_file`           | –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —á–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç |
| `logging`                   | –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Å—Å–∏–∏ –≤ `transcription.log` |

### üß† –ü–∞—Ä–∞–º–µ—Ç—Ä—ã [TRANSCRIBE]:

–°–º. –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é [Whisper API](https://github.com/openai/whisper/blob/main/whisper/transcribe.py#L391)

---

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

```bash
python3 audio_transcriber.py
```

---

## üìÅ –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –∞—É–¥–∏–æ:

- `.mp3`, `.wav`, `.flac`, `.aac`, `.ogg`, `.opus`, `.m4a`, `.wma`, `.aiff`, `.amr`

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—É—é –ø–∞–ø–∫—É –∏ –≤—Å–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏.

---

## üì§ –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã (–≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ):

| –§–∞–π–ª                          | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------------------------|----------|
| `_timecodes.txt`              | –¢–µ–∫—Å—Ç —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ |
| `_raw.txt`                    | –ß–∏—Å—Ç—ã–π —Ç–µ–∫—Å—Ç —Å —Ä–∞–∑–±–∏–≤–∫–æ–π –Ω–∞ –∞–±–∑–∞—Ü—ã |
| `.srt`                        | –°—É–±—Ç–∏—Ç—Ä—ã (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ) |
| `_ERROR.txt`                  | –õ–æ–≥ –æ—à–∏–±–æ–∫ (–µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞) |

---

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
==================================================
Audio Transcriber v1.0
Based on OpenAI Whisper
==================================================

üöÄ CUDA enabled: 1 GPU(s) available
   GPU: NVIDIA GeForce RTX 3070
   CUDA version: 12.1

Scanning "sources/" (including subdirectories)...
‚úÖ Found 3 audio file(s) to process.

Loading model: "base" using engine: openai-whisper...
‚úÖ Model loaded.

[  1/3] Processing: example.mp3
    Duration: 00:02:15
    Starting transcription with openai-whisper (model: base)...
    Transcribing... (duration: 00:02:15)
‚úÖ Done in 0:00:12

üìä Total statistics:
  üïê Audio duration: 00:06:42
  ‚è±Ô∏è Processing time: 00:00:35
  ‚ö° Speed ratio: 11.54x
```

---

## üß™ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- CUDA (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è GPU-—É—Å–∫–æ—Ä–µ–Ω–∏—è)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è –û–°: Windows, Linux, macOS

---

## üßæ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

---

## üì¨ –ê–≤—Ç–æ—Ä

–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ–∑–∞–ø–∏—Å–µ–π. –û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ [OpenAI Whisper](https://github.com/openai/whisper).

--- 

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è ‚Äî —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.